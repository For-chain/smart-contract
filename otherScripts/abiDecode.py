from web3 import Web3, HTTPProvider
from eth_utils import keccak
from config import *

# w3 = Web3(HTTPProvider(BSC_RPC_URL_TEST))


def decode_data(encoded_data):
    web3 = Web3()

    data_bytes = web3.to_bytes(hexstr=encoded_data)

    # 切片以去除前 4 个字节（函数选择器）
    data_slice = data_bytes[4:]

    # 解码数据
    decoded_data = web3.eth.abi.decode_abi(
        [
            "address",
            "tuple(address,address,uint256,uint256,address,uint256)",
            "bytes"
        ],
        data_slice
    )

    decoded_data = web3.eth.contract(abi=abi).decode_function_input(encoded_data)

    return decoded_data


encoded_data = '0x07ed2379000000000000000000000000e37e799d5077682fa0a244d46e5649f71457bd09000000000000000000000000fd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9000000000000000000000000af88d065e77c8cc2239327c5edb3a432268e5831000000000000000000000000e37e799d5077682fa0a244d46e5649f71457bd09000000000000000000000000b3879e95a4b8e3ee570c232b19d520821f540e480000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000029700000000000000000000000000000000000000000000000000000000027900a007e5c0d20000000000000000000000000000000000000002550001450000ca0000b05120e97af01c48c0a332c06a92df36b77b2a680ab54bfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb900445b41b90800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020d6bdbf78ff970a61a04b1ca14834a43f5de4533ebddb5cc80c20ff970a61a04b1ca14834a43f5de4533ebddb5cc88bc2cd9dab840231a0dab5b747b8a6085c4ea4596ae4071118002dc6c08bc2cd9dab840231a0dab5b747b8a6085c4ea459000000000000000000000000000000000000000000000000000000001672ff97ff970a61a04b1ca14834a43f5de4533ebddb5cc84922180e7479d5e125d5a18ab6aecccf166acc83e4fd82af49447d8a07e3bd95bd0d56f35241523fbab100243eece7db000000000000000000000000111111125421ca6dc452d289314280a0f8842a65000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffecc00000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000000000000000000000000b3276493'

decoded_values = decode_data(encoded_data)

print(decoded_values)