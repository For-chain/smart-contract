from tokens.abi import ERC20_abi
from web3 import Web3, HTTPProvider
from tokens.contract import Erc20
import requests
from config import *

w3 = Web3(HTTPProvider(BSC_RPC_URL_MAIN))
# w3 = Web3(HTTPProvider(ARB_RPC_URL_MAIN))

wallets_str_old = "0x685b68fc018aEc58987E1C11f44F053dD7314900,0x7F3634eED97D39bAf5FdFE484D234C3F10c9Af09,0x51ECd84ad1cF1FC681F9Ab75f37CcF41399127bd,0xc35Ef4eE0F7D8f28b377D7cA5D87dD432af26733,0x8154593B5a9889327B5e5CA9967AC7FF2139ac4C,0xa531318483bAAaA5C8b64344Ab90Fe2ac85a0B12,0x73e11273E30b463Cc287b79c0f1A58D2BFD86f28,0x04777720f516C76691e02dC19380338f3F043093"

wallets_str_old_1 = "0x52b2759c826b9b61a66f61f2b944948b2e8356f0,0xada3fd0e39c380c6fd80076b9e30ccc9b8a396bd,0xf0dcbfa18274adf844ee617c013f0286f41eef9c,0x21f0420466180161dd398bea7f5dbae508332207,0xe7647550154ad8a2a89f6e61c419c3e9a5656781,0x5ee4276bb8ea1f937360d0445ecadd2bdceb8099,0x9da80347c4aa40f21ccab71e640a7afa90c47d47,0x26590df64b12b7e075e34dcaf191999d1a66ba67,0x848d2de7e607565400ab28184d3b8a7adc62eed0,0xfe73d2cd37e58c8ffb57136fd348383816994325,0x3e01dec1a47a0c93214e0d4f18c6ad33a3190af0,0x13e78217299e424708596d9f74c8204926d07e0b,0x7590bf2def9f8f65fa58725c4832359ee17ad444,0x5a105923665f462a6e28ea7b1b7abd161a1eca32,0xe8e50a1dcbefeb10a07537f06412a2d17f4915ca,0x086989f69c0432130fce9b592700295f11c65204"

wallets_str_old_2 = "0xcD961262e92eA6D97bE27835A78F817B4D8267ba,0xaecc9297f27A798f2242a477bB01329898782023,0xF850318C853520Cc01A1Ad0B87d86a64393E6Abd,0x2e3Df76D970DDFc6C1748875f0CC8177A29e80c3,0x8E59220860248198Af13d18bFf8F1a141F9E824B,0xe9cc45c13531C365a112C7AF921Af1e11379a874,0x93a96edC6B46AD6fB702FF7Ae594256e19c7EBeB,0xF3d487CDc6044db911be6E56a20582fd421263fa"

wallets_str_old_3 = "0x4E05B98aa468178fD76D74bC9E87Cd3901290c6c,0xf2897bdb5B2504B5FD62bbC43081a5EDc7ADc335,0x3AA1d93638375b24A3218C81BCD4d02C30e9d5C1,0x46F3D954B6b437EeeE6cB5526FF6fCFaEf4e92f4,0x2034364C0873309b5725294253E0Fe5C2BC02B49,0x1d319ab8943AdD20Cb1A52375dE2Dd508Fed5021,0xB0Af6b797d92182b41896Ee45764A6a0037903f5,0xa0BaE439e1C980a833f3b5C9Bc89C400e630dAF1"

wallets_str_old_4 = "0x06B6d97f293F1b626f0e79E4A692473461ff13e2,0x95ec0e9baA22E99dEeE75D1E926600BDD03cce73,0x931619a96A1E9C7BD7F4d792f96Bdb41e0C92A5C,0x8EbcB39945Cf99f1F807D6Ee5b42F10E5B0B4649,0x8D3CbA8f804347D8ca2E6d226CD31fDE7c90f33b,0x1c54445396DC785e0394a658Cd6494Fe173012Af,0x138499c99dc42a21d6C92EAcF4799cBE327e1f65,0xfc921BefBC7409134C3558F3A080238038ece4ae"

wallets_str_old_5 = "0x00096EB027548A0651ab64d800cA874fe580c0f1,0xA79d4e1917487C17d52746baaeE887a785c3283A,0x020d1cA3D5e7CEa20Bc10560e322dAc8c5785748,0xCFd273D7E6121b5bf7586F39A6aDC22F0777480B,0xA3811A200e0f11b5CfB5f5B4a3895c997aC323c0,0x98dA49C8c6d253059301729Ba12775A5b73DA39B,0x86531C50C7261ce0ba65CFbad9ad41c0356C65D3,0x73fe510ccE998207d564dAf95259D854b13a5DE4"

wallets_str_old_6 = "0xe16F8Dbbe780f2ACf7A837D72E702263869f97e3,0x1f76d158A9fC6Ef21126f913e7e7BD7D786e1E10,0xcce47207DCB939946bE1fA4441578c69f8DdB09c,0x9EF6daFE2918650DfF8C297AB2Bd814108969818,0x52dBFAb842aEaCB653e7cD50864dd4789D221EDA,0x1539eE9285C947Fdcd981dd032ef78AcC94C188E,0x7940878B4ffab1fDD2bD216dA525a57aBa19F49a,0x846fF56aD9370C4856d9416c1D13e176c4b68dEa"

wallets_str_old_7 = "0x72209C06F047016938bAF413Ee592D7c91Ad54F5,0x8492D640AbC7cF3543A94c7299196765bBA95645,0x24f51dc43a3664f54C4f64A43626b2008a56822e,0x034c7fb60E497DF9eb400Be1331738D0C9C45b8F,0x1124e45c01a81B0105c79920AA99491A23a0C1ae,0xe72BfA4dA45C7a0E2332eE4A50cb52197236Ca88,0x4aE1C9A3D544200731FE424C6a4B5F820d783D9f,0xEfa4EACcD5110B52163FC94E5C34ccf9995b133f"

wallets_str = "0xf86d733db4D189E4c5a14eaeb3729468792D98Fc,0x63005951D7436d3ECae7dcF071A2F6Ee4Ba5cEB0,0x758EAC914ddC49b66Fbb05cb067467c2375f8Cbc,0x77e233Cc2D9a625Fd40081b5Ac7F3C941eb04186,0x5bD1d3Acb148029d7ce5366d176e374f38AD16fc,0x88A446aC9BAA23bcBcb6e4DE6C32592857561681,0xe47cb62E3eD673AAc2C1c1De3666E29e49D75c38,0x17D4f2af3C472AEEA13CF8a8FbA22a366f3e9d5E"

def eth_getBalance(url, address):
    headers = {
        'Content-Type': 'application/json'
    }
    parm = {
        "jsonrpc": "2.0",
        "id": 1,
        "method": "eth_getBalance",
        "params": [
            address,
            "latest"
        ]
    }
    response = requests.request("POST", url, headers=headers, json=parm)
    eth_balance = int(response.json()['result'], 16) / 10 ** 18
    return eth_balance


def erc20_getBalance(token, address):
    token = w3.eth.contract(address=token, abi=ERC20_abi.abi)
    erc20 = Erc20.Erc20(w3, token, ARB_GWEI_MAIN)
    erc20_balance = erc20.balanceOf(address) / 10 ** 18
    return erc20_balance


if __name__ == '__main__':
    wallets = wallets_str.split(',')
    for wallet in wallets:
        # print(wallet)
        checksum_wallet = Web3.to_checksum_address(wallet)
        eth_balance = eth_getBalance(BSC_RPC_URL_MAIN, checksum_wallet)
        erc20_balance = erc20_getBalance(BSC_USDT_MAIN, checksum_wallet)
        # if eth_balance > 0.1 or erc20_balance > 10:
        print("Wallet: {}, bnb: {}, usdt: {}".format(checksum_wallet, eth_balance, erc20_balance))